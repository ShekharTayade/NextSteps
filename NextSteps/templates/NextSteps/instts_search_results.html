
<!-- READ THE INSTRUCTIONS BELOW BEFORE USING THIS TEMPLATE
 1. Start your page with this template and modify. Rename this template with HTML name and then modify.
 2. We keep as it is the header portion of the page (which is top hidden block and the navigation) 
    and the footer portion (footer block) on each page.
 3. Override only the "slide-show", "features", and "jointhem-blog" blocks on each page
 4. Keep the top "hidden" clock and the nav-bar as it is, which forms the header section of the page.
 5. Overriding the parent blocks will start from "slide-show" block 
 6. Keep the <div>s  given below as it is in the "slide-show" and "features" blocks to keep the same styling matching the home page. 
    If overriding the parent block without any content then remove the <div>s too, just keep block and endblock. 
 7. For most of the pages, you can keep the title of the page in "slide-show" block and put all the content in "features" block. 
    The "jointhem-blog" block can be kept empty.
 8. PLEASE REMEBER :- 
    TO OVERRIDE A BLOCK USE THE CORRESPONDING BLOCK AND <div>s, 
    TO KEEP THE BLOCK EMPTY JUST USE THE BLOCK OPEN AND ENDBLOCK, 
    AND TO KEEP ABLOCK AS IT IS DON'T USE THE BLOCK NAMES HERE SO THOSE BLOCKS FROM PARENT WILL BE USED AS IT IS. 
 -->

<!-- Extend the home page to keep the same styling for header and footer sections. -->
{% extends 'NextSteps/NextSteps.html' %}
{% load static %}


<!-- Override slide-show block from parent -->
{% block slide-show %}
{% endblock slide-show %}

<!-- Override features block -->
{% block features %}
    <div class="showcase block block-border-bottom-grey">
        <div class="container">

        <h3 class="block-title">Institute Details</h3>
        
            <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12">

<!--            {% autoescape off %}
            <form action="{% url 'Institute_Programs'  %}" method='post' id='SubmitSearch'>

                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h5 class="panel-title">
                            Instructions to Get the Details</h5>
                        <span class="pull-right clickable"><i class="glyphicon glyphicon-minus"></i></span>
                    </div>
                    <div class="panel-body">
                        <ul>
                            <li>From the options below please select whether you are interested in Programs & Seats or Important dates for the Insttitutes</li>
                            <li>Select the desired Institutes (by selecting the checkbox)</li>
                            <ul>
                                <li>You can use "Institute Name" and "Address" search boxes to narrow the list</li>
                                <li>The text you enter in these boxes will be matched in the respective table column and result will be filtered further</li>
                            </ul> 
                            <li>Then click on the "Get Details" button</li>
                        </ul>
                    </div>
                </div>
             
                <label class="radio-inline">
                    <input type="radio" name="optradio" value="ProgramsAndSeats" checked="checked">Programs & Seats
                </label>
                <label class="radio-inline">
                    <input type="radio" name="optradio" value="ImportantDates">Important Dates
                </label>
                <label style="display:none" class="radio-inline" >
                    <input type="radio" name="optradio" value="AdminssionRoutes">Admission Routes
                </label>
                <label style="display:none" class="radio-inline" >
                    <input type="radio" name="optradio" value="SurveyDetails">Survey Details
                </label>
        
                <br />
                <button id="btn" class='btn btn-more' type='submit' formmethod='post' value='submit' form = 'SubmitSearch'><i class="fa fa-plus"></i>Get Details</button>
                
                {% csrf_token %}
    
                 creating an invisible text field to submit the search filters to the view "SearchInstts"
                    This will get submitted along with this form and will be available in the view through the session
                <input style="display:None" class="form-control" type="text" id="selectedInstts_nv" name='selectedInstts'>
    
            </form>
            {% endautoescape %}
            <br />
-->
            <div class="col-xs-6">
                Institute Name<input type="text" id="myInput" style="background-image: url('{% static 'img/searchicon.png' %} ');" onkeyup="myFunction()" placeholder="Enter text to search in Institute names..">   
            </div>
            <div class="col-xs-6">
                Address<input type="text" id="myInput1" style="background-image: url('{% static 'img/searchicon.png' %} ');" onkeyup="myFunction()" placeholder="Enter text to search in address...">   
            </div>

            <div class="col-xs-8 col-sm-12 col-md-12">            
            {% if insttCount == 0 %}
                <span style="text-align:left;">
                    <span ><small>No Institutes found!!! Please select the filter again!</small></span>
                </span>                
            {% else %}    
                <span style="text-align:left;">
                    <span ><small>Number of Institutes found: {{insttCount}}</small></span> 
                </span>                
            {% endif %}
            </div>
            </div>  <!-- Ends first row -->            
            <div class="col-xs-12 col-sm-12 col-md-12">
    
            <!-- Render the table -->
            <div class="near_by_hotel_wrapper">
                <div class="near_by_hotel_container">

                    <div  class="col-xs-12 col-sm-12 col-md-12">    
                    <table id="tableOne" class="table no-border custom_table dataTable no-footer dtr-inline">

                        <thead>
                            <tr>                        
                                <th><input type="checkbox" /></th>
                                <th style="width:35%">Name</th>
                                <th style="width:5%">Rank*</th>
                                <th style="width:55%"> Address</th>
                                <th style="width:10%">Type</th>
                            </tr>
                        </thead>

                        <tbody>            
                            {% autoescape off %}
                            {% for il in insttList %}
                            <tr>
                                <td><input type="checkbox" name = "instt"></td>
                                    
                                <td id = "insttName"> {{il.instt_name}} </td>
                            
                                <td class="align-middle"> 
                                    {% for iRank in insttRanking %}
                                        {% if iRank.Institute_id == il.instt_code %}
                                            <span class="label label-primary">{{ iRank.rank }}</span>
                                        {% endif %}
                                    {% endfor %}    
                                </td>
    
                                <td class="align-middle"> {{ il.address_1 }} 
                                    
                                    {% if il.address_2 %}
                                        &nbsp;{{ il.address_2 }}<br />
                                    {% endif %}
                                    
                                    {% if il_.address_3 %}
                                        &nbsp;{{ il.address_3 }}<br />
                                    {% endif %}
                                    
                                    {{ il.city }} &nbsp; {{ il.state }} &nbsp; {{ il.pin_code }} &nbsp;
                                    
                                    {{ il.country }} <br />
                                    {% if il.phone_number %}
                                       <i class="fa fa-fw fa-phone-square"></i>&nbsp; {{il.phone_number}}&nbsp; &nbsp;
                                    {% endif %}   
                                    {% if il.email_id %}
                                        <i class="fa fa-fw fa-paper-plane"></i>&nbsp; {{ il.email_id }} &nbsp; &nbsp;
                                    {% endif %}
                                    
                                    {% if il.website %}
                                        <a href = "http://{{ il.website }}"> {{il.website}} </a><br />
                                    {% endif %}
        
                                </td>
                    
                                <td class="align-middle"> {{il.InstituteType_id}} </td>
                            </tr>
                            {% endfor %}
                            {% endautoescape %}
                        </tbody>
                    </table>                   
                    </div>                    

                    {% if insttList.has_other_pages %}
                      <ul class="pagination">
                        {% if insttList.has_previous %}
                          <li><a href="?page={{ insttList.previous_page_number }}">&laquo;</a></li>
                        {% else %}
                          <li class="disabled"><span>&laquo;</span></li>
                        {% endif %}
                        {% for i in insttList.paginator.page_range %}
                          {% if insttList.number == i %}
                            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
                          {% else %}
                            <li><a href="?page={{ i }}">{{ i }}</a></li>
                          {% endif %}
                        {% endfor %}
                        {% if insttList.has_next %}
                          <li><a href="?page={{ insttList.next_page_number }}">&raquo;</a></li>
                        {% else %}
                          <li class="disabled"><span>&raquo;</span></li>
                        {% endif %}
                      </ul>
                    {% endif %}                    
                    
                    
                </div>
            </div>
            </div>  <!-- ends second row -->        
            </div> <!-- Ends row div -->
        </div>
    </div>
    

    {% load static %}
    <script src="{% static 'lib/jquery/jquery.min.js' %}"></script>

    <!--Script for the panel (Insturctions to get details) -->
    <script>    
         $(document).on('click', '.panel-heading span.clickable', function (e) {
            var $this = $(this);
            if (!$this.hasClass('panel-collapsed')) {
                $this.parents('.panel').find('.panel-body').slideUp();
                $this.addClass('panel-collapsed');
                $this.find('i').removeClass('glyphicon-minus').addClass('glyphicon-plus');
            } else {
                $this.parents('.panel').find('.panel-body').slideDown();
                $this.removeClass('panel-collapsed');
                $this.find('i').removeClass('glyphicon-plus').addClass('glyphicon-minus');
            }
        });
        $(document).on('click', '.panel div.clickable', function (e) {
            var $this = $(this);
            if (!$this.hasClass('panel-collapsed')) {
                $this.parents('.panel').find('.panel-body').slideUp();
                $this.addClass('panel-collapsed');
                $this.find('i').removeClass('glyphicon-minus').addClass('glyphicon-plus');
            } else {
                $this.parents('.panel').find('.panel-body').slideDown();
                $this.removeClass('panel-collapsed');
                $this.find('i').removeClass('glyphicon-plus').addClass('glyphicon-minus');
            }
        });
        $(document).ready(function () {
            $('.panel-heading span.clickable').click();
            $('.panel div.clickable').click();
        });

    </script>

    
    <!-- JQuery solution to get all the institute names into the invisible input textbox for the institutes checked by user -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" ></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var Iname = ''
            $("form").submit(function(){
                $('#tableOne input[type="checkbox"]:checked').each(function(){
                    var $row = $(this).parents('tr'); 
                    Inst = $row.find('td:eq(1)').html();
                    Inst = $.trim(Inst.replace("&amp;", "&"));
                    Iname = Iname + Inst + ";";
                });
                $("#selectedInstts_nv").val(Iname);    
            });
        });
    </script>
    
    <!-- To check/uncheck all rows based on the select all checkbox status -->
    <script>
        $("#tableOne thead tr th:first input:checkbox").click(function () {
            var checkedStatus = this.checked;
            $("#tableOne tbody tr td:first-child input:checkbox").each(function () {
                this.checked = checkedStatus;
            });
        });    
    </script>
 
 
    <!-- Based on the use input in instt name and address input boxes, filter the rows in table -->
     <script>
        function myFunction() {
          // Declare variables 
          var input, input1, filter, filter1, table, tr, td, i;
          input = document.getElementById("myInput");
          input1 = document.getElementById("myInput1");
          filter = input.value.toUpperCase();
          filter1 = input1.value.toUpperCase();
          table = document.getElementById("tableOne");
          tr = table.getElementsByTagName("tr");
        
          // Loop through all table rows, and hide those who don't match the search query
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1];
            td1 = tr[i].getElementsByTagName("td")[3];
            if ((td) || (td1)) {
              if ((td.innerHTML.toUpperCase().indexOf(filter) > -1) && (td1.innerHTML.toUpperCase().indexOf(filter1) > -1)){
                tr[i].style.display = "";
              } else {
                tr[i].style.display = "none";
              }
            } 
          }
        }
    
    </script>
    
{% endblock features %}

{% block misson-statement %}
<!-- Nothing here, just override the block from parent -->
{% endblock misson-statement %}

{% block jointhem-blog %}
<!-- Nothing here, just override the block from parent -->
{% endblock jointhem-blog %}

<!-- Footer-section remains as it is, no override -->

